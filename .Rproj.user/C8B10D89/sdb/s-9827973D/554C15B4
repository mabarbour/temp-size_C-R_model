{
    "contents" : "######################################################\n## Description: This script simulates the direct and indirect (via body size) effects of temperature on consumer-resource dynamics\n## Code author(s): Matt Barbour\n## Email: barbour@zoology.ubc.ca\n######################################################\n\n## load required libraries ----\nlibrary(deSolve)\n\n## functions for simulating consumer-resource dynamics ----\n# general assumptions:\n# (1) logistic growth for the resource(s)\n# (2) type 1 functional response of consumer \n# (3) density-independent mortality for consumer \n# function is in the necessary format \"function(t,y,p)\" for solving used the ode() function in the R package \"deSolve\"\nrmcr_tempsize <- function(t,y,p) {\n  # t,y,p is the necessary format for solving using the ode() function in R\n  R <- y[1]\n  C <- y[2]\n  with(as.list(p), {\n    dR.dt <- rMT * R * (1 - R / KMT) - aMT * C * R \n    dC.dt <- eM * aMT * C * R - mMT * C # assuming e is independent of temperature, Peters 1983, but depends on body size which is indirectly affected by temperature...\n    return(list(c(dR.dt,dC.dt)))\n  })\n}\n\n## function for plotting consumer-resource dynamics over time ----\ndynamic_matplot <- function(param.vector, # vector of parameters for the dynamical model\n                            init.state, # initial state variables for the model\n                            sim.length, # length of simulation\n                            model, # dynamical model\n                            ylim, # limits of state variables for plotting\n                            ...){\n  \n  # Run the experiment\n  df <- ode(init.state, 1:sim.length, model, param.vector)\n  \n  # plot the results. \n  matplot(df[ ,\"time\"], df[ ,names(init.state)],\n          type = \"l\", ylim=ylim, ...)\n}\n\n## temperature-dependent parameters ----\n# from Gilbert et al. 2014, Ecol. Letts.\nrT <- exp(-EB/k*TR) \nKT <- K0*exp(EB/k*TR - ES/k*TS) # delta K is thought to be less than 1 (Kratina et al. 2012, aquatic microcosms; Roemmich and McGowan 1995, marine)\nmT <- m0*exp(-Em/k*TC) \naT <- a0*sqrt(( v0C^2 * exp(-2*EvC/k*TC) + v0R^2 * exp(-2*EvR/k*TR ))) # dependent on type of foragin interaction (Dell et al. 2013). For example, active-capture depends on body velocity of both consumer and resource, sit-and-wait depends primarily on body velocity of resource, grazing depends primarily on body velocity of consumer\n\n## mass-dependent parameters ----\n# from DeLong et al. 2015, Am. Nat.\nrM <- r0*Mr^s.r \nKM <- K0*Mr^s.K\naM <- a0*Mc^s.a\neM <- e0*Mc^s.e\n\n## effects of temperature on average adult body size ----\nMr # need this function\nMc # need this function \n\n## combining temperature- and mass-dependent parameters ----\nrMT <- r0*(Mr^s.r)*exp(-EB/k*TR)\nKMT <- K0*(Mr^s.K)*exp(EB/k*TR - ES/k*TS)\naMT <- a0*(Mc^s.a)*exp(-Em/k*TC)\neM # no appartent direct effect of temperature...but now, it appears there could be an indirect effect of temperature mediated by changes in body size\n\n## temperature-independent parameters ----\n## activation energies\nEB <- 0.65 # activation energy of the metabolic rate; EB = 0.53 - 0.85 Savage et al. 2004, diverse ectotherms\nEm <- 0.65 # activation energy of mortality rate; Em = 0.65 Dell et al. 2011 across diverse taxa; Em = 0.45 Savage et al. 2004 for fish\nES <- 0.65 # activation energy of nutrient supply, just set to 0.65 because I don't know of possible values\nEvC # activation energy of consumer velocity\nEvR # activation energy of resource velocity\n\n## other parameters\nv0C # consumer body velocity\nv0R # resource body velocity\nk <- 8.62*10^-5 # Boltzmann's constant in eV/K, where K is temperature in Kelvin\nTR # body temperature of resource in Kelvin\nTC # body temperature of consumer in Kelvin\nTS # temperature of supply rate? in Kelvin\n\n## exponents for mass-scaling\ns.r # mass-scaling for intrinsic growth rate\ns.K # mass-scaling for carrying capacity\ns.a # mass-scaling for attack rate\ns.e # mass-scaling for conversion efficiency",
    "created" : 1462392650909.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "6|27|7|16|\n9|55|24|1|\n6|34|15|0|\n26|62|40|1|\n42|36|47|333|\n49|29|54|15|\n56|53|58|24|\n60|56|64|150|\n66|38|86|44|\n",
    "hash" : "3449403769",
    "id" : "554C15B4",
    "lastKnownWriteTime" : 1462398202,
    "path" : "~/Documents/temp-size_C-R_model/temp_size_C-R_model.R",
    "project_path" : "temp_size_C-R_model.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "type" : "r_source"
}